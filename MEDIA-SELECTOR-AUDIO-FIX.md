# üéµ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º–∏ –≤–∏–±–æ—Ä—É –∞—É–¥—ñ–æ —Ñ–∞–π–ª—ñ–≤ –≤ MediaSelector

## üö® –ü—Ä–æ–±–ª–µ–º–∞:
–í –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ñ –≥–æ–ª–æ–≤–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ "üìö –í–∏–±—Ä–∞—Ç–∏ –∑ –º–µ–¥—ñ–∞-–±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏" –∞—É–¥—ñ–æ —Ñ–∞–π–ª–∏ –Ω–µ –≤–∏–±–∏—Ä–∞–ª–∏—Å—è —ñ –Ω–µ –ø—ñ–¥–∫–ª—é—á–∞–ª–∏—Å—è.

## üîç –ü—Ä–∏—á–∏–Ω–∞:
MediaSelector –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞–≤ —Ç—ñ–ª—å–∫–∏ –º–µ—Ç–∞–¥–∞–Ω—ñ –∑ localStorage, –∞–ª–µ –Ω–µ –º–∞–≤ –¥–æ—Å—Ç—É–ø—É –¥–æ –ø–æ–≤–Ω–∏—Ö –∞—É–¥—ñ–æ —Ñ–∞–π–ª—ñ–≤, —è–∫—ñ –∑–±–µ—Ä—ñ–≥–∞–ª–∏—Å—è –≤ IndexedDB.

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è:

### 1. **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è IndexedDB –≤ MediaSelector**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ–≤–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ –∑ IndexedDB
- –û–±'—î–¥–Ω–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ localStorage —Ç–∞ IndexedDB
- –ü—Ä–æ–∑–æ—Ä–∏–π –ø—Ä–æ—Ü–µ—Å –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### 2. **–ü–æ–∫—Ä–∞—â–µ–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫**
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ —Ñ–∞–π–ª—ñ–≤ –ø–µ—Ä–µ–¥ –≤–∏–±–æ—Ä–æ–º
- –Ü–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ —Ñ–∞–π–ª–∏
- –í—ñ–∑—É–∞–ª—å–Ω—ñ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ —Å—Ç–∞–Ω—É —Ñ–∞–π–ª—ñ–≤

### 3. **–ü–æ–∫—Ä–∞—â–µ–Ω–∏–π UX**
- –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
- –í—ñ–∑—É–∞–ª—å–Ω–µ –ø–æ–∑–Ω–∞—á–µ–Ω–Ω—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
- –ó—Ä–æ–∑—É–º—ñ–ª—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏

## üõ†Ô∏è –¢–µ—Ö–Ω—ñ—á–Ω—ñ –∑–º—ñ–Ω–∏:

### –ù–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –≤ MediaSelector:
```javascript
// –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ–≤–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ –∑ IndexedDB
const loadFullFilesFromIndexedDB = async (currentFiles) => {
  // –û–±'—î–¥–Ω–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –∑ localStorage —Ç–∞ IndexedDB
  const mergedFiles = currentFiles.map(localFile => {
    if (localFile.type === 'audio' && !localFile.url) {
      const fullFile = indexedDBFiles.find(dbFile => dbFile.id === localFile.id);
      return fullFile || localFile;
    }
    return localFile;
  });
}

// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ —Ñ–∞–π–ª—É –ø–µ—Ä–µ–¥ –≤–∏–±–æ—Ä–æ–º
const handleSelect = (file) => {
  if (file.type === 'audio' && !file.url) {
    alert('‚ùå –ê—É–¥—ñ–æ —Ñ–∞–π–ª –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π. –°–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–∞–π–ª.');
    return;
  }
  onSelect(file);
}
```

### –í—ñ–∑—É–∞–ª—å–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è:
- ‚è≥ –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- ‚ùå –ú—ñ—Ç–∫–∞ "–ù–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π" –¥–ª—è —Ñ–∞–π–ª—ñ–≤ –±–µ–∑ URL
- üî¥ –ß–µ—Ä–≤–æ–Ω–∏–π –±–µ–π–¥–∂ "–ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ñ–∞–π–ª"
- 50% –ø—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å –¥–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤

## üéØ –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î —Ç–µ–ø–µ—Ä:

### 1. **–í—ñ–¥–∫—Ä–∏—Ç—Ç—è MediaSelector**:
1. –ó–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –º–µ—Ç–∞–¥–∞–Ω—ñ –∑ localStorage
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ñ–∞–π–ª—ñ–≤ –≤ IndexedDB
3. –ó–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –ø–æ–≤–Ω—ñ –¥–∞–Ω—ñ –¥–ª—è –∞—É–¥—ñ–æ —Ñ–∞–π–ª—ñ–≤
4. –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è –æ–±'—î–¥–Ω–∞–Ω–∏–π —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª—ñ–≤

### 2. **–í–∏–±—ñ—Ä —Ñ–∞–π–ª—É**:
1. –ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å —Ñ–∞–π–ª—É
2. –Ø–∫—â–æ —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–Ω–∏–π ‚Üí –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
3. –Ø–∫—â–æ —Ñ–∞–π–ª –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π ‚Üí –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø–æ–º–∏–ª–∫–∞

### 3. **–í—ñ–∑—É–∞–ª—å–Ω—ñ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏**:
- ‚úÖ –î–æ—Å—Ç—É–ø–Ω—ñ —Ñ–∞–π–ª–∏ ‚Üí –∑–≤–∏—á–∞–π–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- ‚ùå –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ñ —Ñ–∞–π–ª–∏ ‚Üí –ø—Ä–æ–∑–æ—Ä—ñ –∑ —á–µ—Ä–≤–æ–Ω–∏–º–∏ –º—ñ—Ç–∫–∞–º–∏
- ‚è≥ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è ‚Üí —Å–ø—ñ–Ω–µ—Ä –∑ –ø–æ—è—Å–Ω–µ–Ω–Ω—è–º

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

### –°—Ü–µ–Ω–∞—Ä—ñ–π 1: –ê—É–¥—ñ–æ —Ñ–∞–π–ª–∏ –≤ localStorage
1. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –Ω–µ–≤–µ–ª–∏–∫–∏–π –∞—É–¥—ñ–æ —Ñ–∞–π–ª (<2MB)
2. –í—ñ–¥–∫—Ä–∏–π—Ç–µ MediaSelector
3. ‚úÖ –§–∞–π–ª –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —ñ –≤–∏–±–∏—Ä–∞—î—Ç—å—Å—è

### –°—Ü–µ–Ω–∞—Ä—ñ–π 2: –ê—É–¥—ñ–æ —Ñ–∞–π–ª–∏ –≤ IndexedDB
1. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –≤–µ–ª–∏–∫–∏–π –∞—É–¥—ñ–æ —Ñ–∞–π–ª (>2MB)
2. –í—ñ–¥–∫—Ä–∏–π—Ç–µ MediaSelector
3. ‚è≥ –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
4. ‚úÖ –§–∞–π–ª –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –∑ IndexedDB —ñ –≤–∏–±–∏—Ä–∞—î—Ç—å—Å—è

### –°—Ü–µ–Ω–∞—Ä—ñ–π 3: –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ñ —Ñ–∞–π–ª–∏
1. –Ø–∫—â–æ —Ñ–∞–π–ª –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–≤—Å—è –∑ IndexedDB
2. ‚ùå –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è —è–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π
3. –ü—Ä–∏ —Å–ø—Ä–æ–±—ñ –≤–∏–±–æ—Ä—É ‚Üí –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:

### –Ø–∫—â–æ –∞—É–¥—ñ–æ —Ñ–∞–π–ª –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π:
1. **–ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ñ–∞–π–ª** —á–µ—Ä–µ–∑ Content Manager
2. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä–æ–∑–º—ñ—Ä** —Ñ–∞–π–ª—É (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ <10MB)
3. **–û—á–∏—Å—Ç—ñ—Ç—å –∫–µ—à** –±—Ä–∞—É–∑–µ—Ä–∞ —è–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∞ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è

### –î–ª—è –∫—Ä–∞—â–æ—ó —Ä–æ–±–æ—Ç–∏:
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∞—É–¥—ñ–æ —Ñ–∞–π–ª–∏ <2MB –¥–ª—è —à–≤–∏–¥–∫–æ—ó —Ä–æ–±–æ—Ç–∏
- –†–µ–≥—É–ª—è—Ä–Ω–æ –µ–∫—Å–ø–æ—Ä—Ç—É–π—Ç–µ –¥–∞–Ω—ñ –∑ Content Manager
- –ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å —Ñ–∞–π–ª—ñ–≤ –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

## üéä –†–µ–∑—É–ª—å—Ç–∞—Ç:

### –î–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
‚ùå –ê—É–¥—ñ–æ —Ñ–∞–π–ª–∏ –Ω–µ –≤–∏–±–∏—Ä–∞–ª–∏—Å—è  
‚ùå –ù–µ–º–∞—î –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –∑–≤'—è–∑–∫—É –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏  
‚ùå –ù–µ–∑—Ä–æ–∑—É–º—ñ–ª–æ —á–æ–º—É —Ñ–∞–π–ª –Ω–µ –ø—Ä–∞—Ü—é—î  

### –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
‚úÖ –ê—É–¥—ñ–æ —Ñ–∞–π–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –∑ IndexedDB  
‚úÖ –ß—ñ—Ç–∫—ñ –≤—ñ–∑—É–∞–ª—å–Ω—ñ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ —Å—Ç–∞–Ω—É —Ñ–∞–π–ª—ñ–≤  
‚úÖ –Ü–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏  
‚úÖ –ü—Ä–æ–∑–æ—Ä–∏–π –ø—Ä–æ—Ü–µ—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è  

---

**üéâ MediaSelector —Ç–µ–ø–µ—Ä –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—ñ–¥—Ç—Ä–∏–º—É—î –∞—É–¥—ñ–æ —Ñ–∞–π–ª–∏ –∑ IndexedDB!**

–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –º–æ–∂—É—Ç—å:
- üéµ –í–∏–±–∏—Ä–∞—Ç–∏ –∞—É–¥—ñ–æ —Ñ–∞–π–ª–∏ –∑ –º–µ–¥—ñ–∞-–±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏
- üëÄ –ë–∞—á–∏—Ç–∏ —Å—Ç–∞–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
- ‚ö†Ô∏è –û—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –∑—Ä–æ–∑—É–º—ñ–ª—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø—Ä–æ–±–ª–µ–º–∏
- üîÑ –õ–µ–≥–∫–æ –≤–∏–ø—Ä–∞–≤–ª—è—Ç–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ —Ñ–∞–π–ª–∏ 